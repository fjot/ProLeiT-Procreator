/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var NgxIndexedDB = /** @class */ (function () {
    function NgxIndexedDB(dbName, version) {
        this.utils = new Utils();
        this.dbWrapper = new DbWrapper(dbName, version);
    }
    /**
     * @param {?} version
     * @param {?=} upgradeCallback
     * @return {?}
     */
    NgxIndexedDB.prototype.openDatabase = /**
     * @param {?} version
     * @param {?=} upgradeCallback
     * @return {?}
     */
    function (version, upgradeCallback) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dbWrapper.dbVersion = version;
            /** @type {?} */
            var request = _this.utils.indexedDB.open(_this.dbWrapper.dbName, version);
            request.onsuccess = function (e) {
                _this.dbWrapper.db = request.result;
                resolve();
            };
            request.onerror = function (e) {
                reject('IndexedDB error: ' + (/** @type {?} */ (e.target)).errorCode
                    ? (/** @type {?} */ (e.target)).errorCode + ' (' + (/** @type {?} */ (e.target)).error + ')'
                    : (/** @type {?} */ (e.target)).errorCode);
            };
            if (typeof upgradeCallback === 'function') {
                request.onupgradeneeded = function (e) {
                    upgradeCallback(e, _this.dbWrapper.db);
                };
            }
        });
    };
    /**
     * @param {?} storeName
     * @param {?} key
     * @return {?}
     */
    NgxIndexedDB.prototype.getByKey = /**
     * @param {?} storeName
     * @param {?} key
     * @return {?}
     */
    function (storeName, key) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dbWrapper.validateBeforeTransaction(storeName, reject);
            /** @type {?} */
            var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readonly, storeName, reject, resolve));
            /** @type {?} */
            var objectStore = transaction.objectStore(storeName);
            /** @type {?} */
            var request;
            request = objectStore.get(key);
            request.onsuccess = function (event) {
                resolve((/** @type {?} */ (event.target)).result);
            };
        });
    };
    /**
     * @param {?} storeName
     * @param {?=} keyRange
     * @param {?=} indexDetails
     * @return {?}
     */
    NgxIndexedDB.prototype.getAll = /**
     * @param {?} storeName
     * @param {?=} keyRange
     * @param {?=} indexDetails
     * @return {?}
     */
    function (storeName, keyRange, indexDetails) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dbWrapper.validateBeforeTransaction(storeName, reject);
            /** @type {?} */
            var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readonly, storeName, reject, resolve));
            /** @type {?} */
            var objectStore = transaction.objectStore(storeName);
            /** @type {?} */
            var result = [];
            /** @type {?} */
            var request;
            if (indexDetails) {
                /** @type {?} */
                var index = objectStore.index(indexDetails.indexName);
                /** @type {?} */
                var order = indexDetails.order === 'desc' ? 'prev' : 'next';
                request = index.openCursor(keyRange, /** @type {?} */ (order));
            }
            else {
                request = objectStore.openCursor(keyRange);
            }
            request.onerror = function (e) {
                reject(e);
            };
            request.onsuccess = function (evt) {
                /** @type {?} */
                var cursor = (/** @type {?} */ (evt.target)).result;
                if (cursor) {
                    result.push(cursor['value']);
                    cursor['continue']();
                }
                else {
                    resolve(result);
                }
            };
        });
    };
    /**
     * @param {?} storeName
     * @param {?} value
     * @param {?=} key
     * @return {?}
     */
    NgxIndexedDB.prototype.add = /**
     * @param {?} storeName
     * @param {?} value
     * @param {?=} key
     * @return {?}
     */
    function (storeName, value, key) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dbWrapper.validateBeforeTransaction(storeName, reject);
            /** @type {?} */
            var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readwrite, storeName, reject, resolve));
            /** @type {?} */
            var objectStore = transaction.objectStore(storeName);
            /** @type {?} */
            var request = objectStore.add(value, key);
            request.onsuccess = function (evt) {
                key = evt.target.result;
            };
        });
    };
    /**
     * @param {?} storeName
     * @param {?} value
     * @param {?=} key
     * @return {?}
     */
    NgxIndexedDB.prototype.update = /**
     * @param {?} storeName
     * @param {?} value
     * @param {?=} key
     * @return {?}
     */
    function (storeName, value, key) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dbWrapper.validateBeforeTransaction(storeName, reject);
            /** @type {?} */
            var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readwrite, storeName, reject, resolve));
            /** @type {?} */
            var objectStore = transaction.objectStore(storeName);
            objectStore.put(value, key);
        });
    };
    /**
     * @param {?} storeName
     * @param {?} key
     * @return {?}
     */
    NgxIndexedDB.prototype.delete = /**
     * @param {?} storeName
     * @param {?} key
     * @return {?}
     */
    function (storeName, key) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dbWrapper.validateBeforeTransaction(storeName, reject);
            /** @type {?} */
            var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readwrite, storeName, reject, resolve));
            /** @type {?} */
            var objectStore = transaction.objectStore(storeName);
            objectStore['delete'](key);
        });
    };
    /**
     * @param {?} storeName
     * @param {?} cursorCallback
     * @param {?=} keyRange
     * @return {?}
     */
    NgxIndexedDB.prototype.openCursor = /**
     * @param {?} storeName
     * @param {?} cursorCallback
     * @param {?=} keyRange
     * @return {?}
     */
    function (storeName, cursorCallback, keyRange) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dbWrapper.validateBeforeTransaction(storeName, reject);
            /** @type {?} */
            var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readonly, storeName, reject, resolve));
            /** @type {?} */
            var objectStore = transaction.objectStore(storeName);
            /** @type {?} */
            var request = objectStore.openCursor(keyRange);
            request.onsuccess = function (evt) {
                cursorCallback(evt);
                resolve();
            };
        });
    };
    /**
     * @param {?} storeName
     * @return {?}
     */
    NgxIndexedDB.prototype.clear = /**
     * @param {?} storeName
     * @return {?}
     */
    function (storeName) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dbWrapper.validateBeforeTransaction(storeName, reject);
            /** @type {?} */
            var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readwrite, storeName, reject, resolve));
            /** @type {?} */
            var objectStore = transaction.objectStore(storeName);
            objectStore.clear();
            resolve();
        });
    };
    /**
     * @param {?} storeName
     * @param {?} indexName
     * @param {?} key
     * @return {?}
     */
    NgxIndexedDB.prototype.getByIndex = /**
     * @param {?} storeName
     * @param {?} indexName
     * @param {?} key
     * @return {?}
     */
    function (storeName, indexName, key) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.dbWrapper.validateBeforeTransaction(storeName, reject);
            /** @type {?} */
            var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readonly, storeName, reject, resolve));
            /** @type {?} */
            var objectStore = transaction.objectStore(storeName);
            /** @type {?} */
            var index = objectStore.index(indexName);
            /** @type {?} */
            var request = index.get(key);
            request.onsuccess = function (event) {
                resolve((/** @type {?} */ (event.target)).result);
            };
        });
    };
    return NgxIndexedDB;
}());
var Utils = /** @class */ (function () {
    function Utils() {
        this.indexedDB =
            window.indexedDB ||
                (/** @type {?} */ (window)).mozIndexedDB ||
                (/** @type {?} */ (window)).webkitIndexedDB ||
                (/** @type {?} */ (window)).msIndexedDB;
    }
    return Utils;
}());
var DbWrapper = /** @class */ (function () {
    function DbWrapper(dbName, version) {
        this.dbName = dbName;
        this.dbVersion = version || 1;
    }
    /**
     * @param {?} storeName
     * @return {?}
     */
    DbWrapper.prototype.validateStoreName = /**
     * @param {?} storeName
     * @return {?}
     */
    function (storeName) {
        return this.db.objectStoreNames.contains(storeName);
    };
    /**
     * @param {?} storeName
     * @param {?} reject
     * @return {?}
     */
    DbWrapper.prototype.validateBeforeTransaction = /**
     * @param {?} storeName
     * @param {?} reject
     * @return {?}
     */
    function (storeName, reject) {
        if (!this.db) {
            reject('You need to use the openDatabase function to create a database before you query it!');
        }
        if (!this.validateStoreName(storeName)) {
            reject('objectStore does not exists: ' + storeName);
        }
    };
    /**
     * @param {?} options
     * @return {?}
     */
    DbWrapper.prototype.createTransaction = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        /** @type {?} */
        var trans = this.db.transaction(options.storeName, options.dbMode);
        trans.onerror = options.error;
        trans.oncomplete = options.complete;
        trans.onabort = options.abort;
        return trans;
    };
    /**
     * @param {?} type
     * @param {?} storeName
     * @param {?} reject
     * @param {?} resolve
     * @return {?}
     */
    DbWrapper.prototype.optionsGenerator = /**
     * @param {?} type
     * @param {?} storeName
     * @param {?} reject
     * @param {?} resolve
     * @return {?}
     */
    function (type, storeName, reject, resolve) {
        return {
            storeName: storeName,
            dbMode: type,
            error: function (e) {
                reject(e);
            },
            complete: function (e) {
                resolve();
            },
            abort: function (e) {
                reject(e);
            }
        };
    };
    return DbWrapper;
}());
/** @enum {string} */
var DBMode = {
    readonly: 'readonly',
    readwrite: 'readwrite',
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { NgxIndexedDB };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWluZGV4ZWQtZGIuanMubWFwIiwic291cmNlcyI6WyJuZzovL25neC1pbmRleGVkLWRiL2xpYi9uZ3gtaW5kZXhlZC1kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgTmd4SW5kZXhlZERCIHtcblx0dXRpbHM6IFV0aWxzO1xuXHRkYldyYXBwZXI6IERiV3JhcHBlcjtcblxuXHRjb25zdHJ1Y3RvcihkYk5hbWU6IHN0cmluZywgdmVyc2lvbjogbnVtYmVyKSB7XG5cdFx0dGhpcy51dGlscyA9IG5ldyBVdGlscygpO1xuXHRcdHRoaXMuZGJXcmFwcGVyID0gbmV3IERiV3JhcHBlcihkYk5hbWUsIHZlcnNpb24pO1xuXHR9XG5cblx0b3BlbkRhdGFiYXNlKHZlcnNpb246IG51bWJlciwgdXBncmFkZUNhbGxiYWNrPzogRnVuY3Rpb24pIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0aGlzLmRiV3JhcHBlci5kYlZlcnNpb24gPSB2ZXJzaW9uO1xuXHRcdFx0bGV0IHJlcXVlc3QgPSB0aGlzLnV0aWxzLmluZGV4ZWREQi5vcGVuKHRoaXMuZGJXcmFwcGVyLmRiTmFtZSwgdmVyc2lvbik7XG5cdFx0XHRyZXF1ZXN0Lm9uc3VjY2VzcyA9IGUgPT4ge1xuXHRcdFx0XHR0aGlzLmRiV3JhcHBlci5kYiA9IHJlcXVlc3QucmVzdWx0O1xuXHRcdFx0XHRyZXNvbHZlKCk7XG5cdFx0XHR9O1xuXG5cdFx0XHRyZXF1ZXN0Lm9uZXJyb3IgPSBlID0+IHtcblx0XHRcdFx0cmVqZWN0KFxuXHRcdFx0XHRcdCdJbmRleGVkREIgZXJyb3I6ICcgKyAoPGFueT5lLnRhcmdldCkuZXJyb3JDb2RlXG5cdFx0XHRcdFx0XHQ/ICg8YW55PmUudGFyZ2V0KS5lcnJvckNvZGUgKyAnICgnICsgKDxhbnk+ZS50YXJnZXQpLmVycm9yICsgJyknXG5cdFx0XHRcdFx0XHQ6ICg8YW55PmUudGFyZ2V0KS5lcnJvckNvZGVcblx0XHRcdFx0KTtcblx0XHRcdH07XG5cblx0XHRcdGlmICh0eXBlb2YgdXBncmFkZUNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZSA9PiB7XG5cdFx0XHRcdFx0dXBncmFkZUNhbGxiYWNrKGUsIHRoaXMuZGJXcmFwcGVyLmRiKTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdGdldEJ5S2V5KHN0b3JlTmFtZTogc3RyaW5nLCBrZXk6IGFueSkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZTxhbnk+KChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdHRoaXMuZGJXcmFwcGVyLnZhbGlkYXRlQmVmb3JlVHJhbnNhY3Rpb24oc3RvcmVOYW1lLCByZWplY3QpO1xuXG5cdFx0XHRsZXQgdHJhbnNhY3Rpb24gPSB0aGlzLmRiV3JhcHBlci5jcmVhdGVUcmFuc2FjdGlvbihcblx0XHRcdFx0XHR0aGlzLmRiV3JhcHBlci5vcHRpb25zR2VuZXJhdG9yKERCTW9kZS5yZWFkb25seSwgc3RvcmVOYW1lLCByZWplY3QsIHJlc29sdmUpXG5cdFx0XHRcdCksXG5cdFx0XHRcdG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoc3RvcmVOYW1lKSxcblx0XHRcdFx0cmVxdWVzdDogSURCUmVxdWVzdDtcblxuXHRcdFx0cmVxdWVzdCA9IG9iamVjdFN0b3JlLmdldChrZXkpO1xuXHRcdFx0cmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbihldmVudDogRXZlbnQpIHtcblx0XHRcdFx0cmVzb2x2ZSgoPGFueT5ldmVudC50YXJnZXQpLnJlc3VsdCk7XG5cdFx0XHR9O1xuXHRcdH0pO1xuXHR9XG5cblx0Z2V0QWxsKHN0b3JlTmFtZTogc3RyaW5nLCBrZXlSYW5nZT86IElEQktleVJhbmdlLCBpbmRleERldGFpbHM/OiBJbmRleERldGFpbHMpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0aGlzLmRiV3JhcHBlci52YWxpZGF0ZUJlZm9yZVRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgcmVqZWN0KTtcblxuXHRcdFx0bGV0IHRyYW5zYWN0aW9uID0gdGhpcy5kYldyYXBwZXIuY3JlYXRlVHJhbnNhY3Rpb24oXG5cdFx0XHRcdFx0dGhpcy5kYldyYXBwZXIub3B0aW9uc0dlbmVyYXRvcihEQk1vZGUucmVhZG9ubHksIHN0b3JlTmFtZSwgcmVqZWN0LCByZXNvbHZlKVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHN0b3JlTmFtZSksXG5cdFx0XHRcdHJlc3VsdDogQXJyYXk8YW55PiA9IFtdLFxuXHRcdFx0XHRyZXF1ZXN0OiBJREJSZXF1ZXN0O1xuXHRcdFx0aWYgKGluZGV4RGV0YWlscykge1xuXHRcdFx0XHRsZXQgaW5kZXggPSBvYmplY3RTdG9yZS5pbmRleChpbmRleERldGFpbHMuaW5kZXhOYW1lKSxcblx0XHRcdFx0XHRvcmRlciA9IGluZGV4RGV0YWlscy5vcmRlciA9PT0gJ2Rlc2MnID8gJ3ByZXYnIDogJ25leHQnO1xuXHRcdFx0XHRyZXF1ZXN0ID0gaW5kZXgub3BlbkN1cnNvcihrZXlSYW5nZSwgPElEQkN1cnNvckRpcmVjdGlvbj5vcmRlcik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXF1ZXN0ID0gb2JqZWN0U3RvcmUub3BlbkN1cnNvcihrZXlSYW5nZSk7XG5cdFx0XHR9XG5cblx0XHRcdHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0cmVqZWN0KGUpO1xuXHRcdFx0fTtcblxuXHRcdFx0cmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbihldnQ6IEV2ZW50KSB7XG5cdFx0XHRcdGxldCBjdXJzb3IgPSAoPElEQk9wZW5EQlJlcXVlc3Q+ZXZ0LnRhcmdldCkucmVzdWx0O1xuXHRcdFx0XHRpZiAoY3Vyc29yKSB7XG5cdFx0XHRcdFx0cmVzdWx0LnB1c2goY3Vyc29yWyd2YWx1ZSddKTtcblx0XHRcdFx0XHRjdXJzb3JbJ2NvbnRpbnVlJ10oKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXNvbHZlKHJlc3VsdCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fSk7XG5cdH1cblxuXHRhZGQoc3RvcmVOYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnksIGtleT86IGFueSkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZTxhbnk+KChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdHRoaXMuZGJXcmFwcGVyLnZhbGlkYXRlQmVmb3JlVHJhbnNhY3Rpb24oc3RvcmVOYW1lLCByZWplY3QpO1xuXHRcdFx0bGV0IHRyYW5zYWN0aW9uID0gdGhpcy5kYldyYXBwZXIuY3JlYXRlVHJhbnNhY3Rpb24oXG5cdFx0XHRcdFx0dGhpcy5kYldyYXBwZXIub3B0aW9uc0dlbmVyYXRvcihEQk1vZGUucmVhZHdyaXRlLCBzdG9yZU5hbWUsIHJlamVjdCwgcmVzb2x2ZSlcblx0XHRcdFx0KSxcblx0XHRcdFx0b2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzdG9yZU5hbWUpO1xuXG5cdFx0XHRsZXQgcmVxdWVzdCA9IG9iamVjdFN0b3JlLmFkZCh2YWx1ZSwga2V5KTtcblx0XHRcdHJlcXVlc3Qub25zdWNjZXNzID0gKGV2dDogYW55KSA9PiB7XG5cdFx0XHRcdGtleSA9IGV2dC50YXJnZXQucmVzdWx0O1xuXHRcdFx0fTtcblx0XHR9KTtcblx0fVxuXG5cdHVwZGF0ZShzdG9yZU5hbWU6IHN0cmluZywgdmFsdWU6IGFueSwga2V5PzogYW55KSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlPGFueT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dGhpcy5kYldyYXBwZXIudmFsaWRhdGVCZWZvcmVUcmFuc2FjdGlvbihzdG9yZU5hbWUsIHJlamVjdCk7XG5cblx0XHRcdGxldCB0cmFuc2FjdGlvbiA9IHRoaXMuZGJXcmFwcGVyLmNyZWF0ZVRyYW5zYWN0aW9uKFxuXHRcdFx0XHRcdHRoaXMuZGJXcmFwcGVyLm9wdGlvbnNHZW5lcmF0b3IoREJNb2RlLnJlYWR3cml0ZSwgc3RvcmVOYW1lLCByZWplY3QsIHJlc29sdmUpXG5cdFx0XHRcdCksXG5cdFx0XHRcdG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoc3RvcmVOYW1lKTtcblxuXHRcdFx0b2JqZWN0U3RvcmUucHV0KHZhbHVlLCBrZXkpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZGVsZXRlKHN0b3JlTmFtZTogc3RyaW5nLCBrZXk6IGFueSkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZTxhbnk+KChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdHRoaXMuZGJXcmFwcGVyLnZhbGlkYXRlQmVmb3JlVHJhbnNhY3Rpb24oc3RvcmVOYW1lLCByZWplY3QpO1xuXG5cdFx0XHRsZXQgdHJhbnNhY3Rpb24gPSB0aGlzLmRiV3JhcHBlci5jcmVhdGVUcmFuc2FjdGlvbihcblx0XHRcdFx0XHR0aGlzLmRiV3JhcHBlci5vcHRpb25zR2VuZXJhdG9yKERCTW9kZS5yZWFkd3JpdGUsIHN0b3JlTmFtZSwgcmVqZWN0LCByZXNvbHZlKVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHN0b3JlTmFtZSk7XG5cblx0XHRcdG9iamVjdFN0b3JlWydkZWxldGUnXShrZXkpO1xuXHRcdH0pO1xuXHR9XG5cblx0b3BlbkN1cnNvcihzdG9yZU5hbWU6IHN0cmluZywgY3Vyc29yQ2FsbGJhY2s6IChldnQ6IEV2ZW50KSA9PiB2b2lkLCBrZXlSYW5nZT86IElEQktleVJhbmdlKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlPGFueT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dGhpcy5kYldyYXBwZXIudmFsaWRhdGVCZWZvcmVUcmFuc2FjdGlvbihzdG9yZU5hbWUsIHJlamVjdCk7XG5cdFx0XHRsZXQgdHJhbnNhY3Rpb24gPSB0aGlzLmRiV3JhcHBlci5jcmVhdGVUcmFuc2FjdGlvbihcblx0XHRcdFx0XHR0aGlzLmRiV3JhcHBlci5vcHRpb25zR2VuZXJhdG9yKERCTW9kZS5yZWFkb25seSwgc3RvcmVOYW1lLCByZWplY3QsIHJlc29sdmUpXG5cdFx0XHRcdCksXG5cdFx0XHRcdG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoc3RvcmVOYW1lKSxcblx0XHRcdFx0cmVxdWVzdCA9IG9iamVjdFN0b3JlLm9wZW5DdXJzb3Ioa2V5UmFuZ2UpO1xuXG5cdFx0XHRyZXF1ZXN0Lm9uc3VjY2VzcyA9IChldnQ6IEV2ZW50KSA9PiB7XG5cdFx0XHRcdGN1cnNvckNhbGxiYWNrKGV2dCk7XG5cdFx0XHRcdHJlc29sdmUoKTtcblx0XHRcdH07XG5cdFx0fSk7XG5cdH1cblxuXHRjbGVhcihzdG9yZU5hbWU6IHN0cmluZykge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZTxhbnk+KChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdHRoaXMuZGJXcmFwcGVyLnZhbGlkYXRlQmVmb3JlVHJhbnNhY3Rpb24oc3RvcmVOYW1lLCByZWplY3QpO1xuXHRcdFx0bGV0IHRyYW5zYWN0aW9uID0gdGhpcy5kYldyYXBwZXIuY3JlYXRlVHJhbnNhY3Rpb24oXG5cdFx0XHRcdFx0dGhpcy5kYldyYXBwZXIub3B0aW9uc0dlbmVyYXRvcihEQk1vZGUucmVhZHdyaXRlLCBzdG9yZU5hbWUsIHJlamVjdCwgcmVzb2x2ZSlcblx0XHRcdFx0KSxcblx0XHRcdFx0b2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzdG9yZU5hbWUpO1xuXHRcdFx0b2JqZWN0U3RvcmUuY2xlYXIoKTtcblx0XHRcdHJlc29sdmUoKTtcblx0XHR9KTtcblx0fVxuXG5cdGdldEJ5SW5kZXgoc3RvcmVOYW1lOiBzdHJpbmcsIGluZGV4TmFtZTogc3RyaW5nLCBrZXk6IGFueSkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZTxhbnk+KChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdHRoaXMuZGJXcmFwcGVyLnZhbGlkYXRlQmVmb3JlVHJhbnNhY3Rpb24oc3RvcmVOYW1lLCByZWplY3QpO1xuXHRcdFx0bGV0IHRyYW5zYWN0aW9uID0gdGhpcy5kYldyYXBwZXIuY3JlYXRlVHJhbnNhY3Rpb24oXG5cdFx0XHRcdFx0dGhpcy5kYldyYXBwZXIub3B0aW9uc0dlbmVyYXRvcihEQk1vZGUucmVhZG9ubHksIHN0b3JlTmFtZSwgcmVqZWN0LCByZXNvbHZlKVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHN0b3JlTmFtZSksXG5cdFx0XHRcdGluZGV4ID0gb2JqZWN0U3RvcmUuaW5kZXgoaW5kZXhOYW1lKSxcblx0XHRcdFx0cmVxdWVzdCA9IGluZGV4LmdldChrZXkpO1xuXG5cdFx0XHRyZXF1ZXN0Lm9uc3VjY2VzcyA9IGV2ZW50ID0+IHtcblx0XHRcdFx0cmVzb2x2ZSgoPElEQk9wZW5EQlJlcXVlc3Q+ZXZlbnQudGFyZ2V0KS5yZXN1bHQpO1xuXHRcdFx0fTtcblx0XHR9KTtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgVXRpbHMge1xuXHRpbmRleGVkREI6IElEQkZhY3Rvcnk7XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5pbmRleGVkREIgPVxuXHRcdFx0d2luZG93LmluZGV4ZWREQiB8fFxuXHRcdFx0KDxhbnk+d2luZG93KS5tb3pJbmRleGVkREIgfHxcblx0XHRcdCg8YW55PndpbmRvdykud2Via2l0SW5kZXhlZERCIHx8XG5cdFx0XHQoPGFueT53aW5kb3cpLm1zSW5kZXhlZERCO1xuXHR9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5kZXhEZXRhaWxzIHtcblx0aW5kZXhOYW1lOiBzdHJpbmc7XG5cdG9yZGVyOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBEYldyYXBwZXIge1xuXHRkYk5hbWU6IHN0cmluZztcblx0ZGJWZXJzaW9uOiBudW1iZXI7XG5cdGRiOiBJREJEYXRhYmFzZTtcblxuXHRjb25zdHJ1Y3RvcihkYk5hbWU6IHN0cmluZywgdmVyc2lvbjogbnVtYmVyKSB7XG5cdFx0dGhpcy5kYk5hbWUgPSBkYk5hbWU7XG5cdFx0dGhpcy5kYlZlcnNpb24gPSB2ZXJzaW9uIHx8IDE7XG5cdH1cblxuXHR2YWxpZGF0ZVN0b3JlTmFtZShzdG9yZU5hbWU6IHN0cmluZykge1xuXHRcdHJldHVybiB0aGlzLmRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoc3RvcmVOYW1lKTtcblx0fVxuXG5cdHZhbGlkYXRlQmVmb3JlVHJhbnNhY3Rpb24oc3RvcmVOYW1lOiBzdHJpbmcsIHJlamVjdDogRnVuY3Rpb24pIHtcblx0XHRpZiAoIXRoaXMuZGIpIHtcblx0XHRcdHJlamVjdCgnWW91IG5lZWQgdG8gdXNlIHRoZSBvcGVuRGF0YWJhc2UgZnVuY3Rpb24gdG8gY3JlYXRlIGEgZGF0YWJhc2UgYmVmb3JlIHlvdSBxdWVyeSBpdCEnKTtcblx0XHR9XG5cdFx0aWYgKCF0aGlzLnZhbGlkYXRlU3RvcmVOYW1lKHN0b3JlTmFtZSkpIHtcblx0XHRcdHJlamVjdCgnb2JqZWN0U3RvcmUgZG9lcyBub3QgZXhpc3RzOiAnICsgc3RvcmVOYW1lKTtcblx0XHR9XG5cdH1cblxuXHRjcmVhdGVUcmFuc2FjdGlvbihvcHRpb25zOiBPcHRpb25zKTogSURCVHJhbnNhY3Rpb24ge1xuXHRcdGxldCB0cmFuczogSURCVHJhbnNhY3Rpb24gPSB0aGlzLmRiLnRyYW5zYWN0aW9uKG9wdGlvbnMuc3RvcmVOYW1lLCBvcHRpb25zLmRiTW9kZSk7XG5cdFx0dHJhbnMub25lcnJvciA9IG9wdGlvbnMuZXJyb3I7XG5cdFx0dHJhbnMub25jb21wbGV0ZSA9IG9wdGlvbnMuY29tcGxldGU7XG5cdFx0dHJhbnMub25hYm9ydCA9IG9wdGlvbnMuYWJvcnQ7XG5cdFx0cmV0dXJuIHRyYW5zO1xuXHR9XG5cblx0b3B0aW9uc0dlbmVyYXRvcih0eXBlOiBhbnksIHN0b3JlTmFtZTogYW55LCByZWplY3Q6IEZ1bmN0aW9uLCByZXNvbHZlOiBGdW5jdGlvbik6IE9wdGlvbnMge1xuXHRcdHJldHVybiB7XG5cdFx0XHRzdG9yZU5hbWU6IHN0b3JlTmFtZSxcblx0XHRcdGRiTW9kZTogdHlwZSxcblx0XHRcdGVycm9yOiAoZTogRXZlbnQpID0+IHtcblx0XHRcdFx0cmVqZWN0KGUpO1xuXHRcdFx0fSxcblx0XHRcdGNvbXBsZXRlOiAoZTogRXZlbnQpID0+IHtcblx0XHRcdFx0cmVzb2x2ZSgpO1xuXHRcdFx0fSxcblx0XHRcdGFib3J0OiAoZTogRXZlbnQpID0+IHtcblx0XHRcdFx0cmVqZWN0KGUpO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcHRpb25zIHtcblx0c3RvcmVOYW1lOiBzdHJpbmc7XG5cdGRiTW9kZTogSURCVHJhbnNhY3Rpb25Nb2RlO1xuXHRlcnJvcjogKGU6IEV2ZW50KSA9PiBhbnk7XG5cdGNvbXBsZXRlOiAoZTogRXZlbnQpID0+IGFueTtcblx0YWJvcnQ/OiBhbnk7XG59XG5cbmV4cG9ydCBlbnVtIERCTW9kZSB7XG5cdHJlYWRvbmx5ID0gJ3JlYWRvbmx5Jyxcblx0cmVhZHdyaXRlID0gJ3JlYWR3cml0ZSdcbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBQTtJQUlDLHNCQUFZLE1BQWMsRUFBRSxPQUFlO1FBQzFDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztRQUN6QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksU0FBUyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztLQUNoRDs7Ozs7O0lBRUQsbUNBQVk7Ozs7O0lBQVosVUFBYSxPQUFlLEVBQUUsZUFBMEI7UUFBeEQsaUJBdUJDO1FBdEJBLE9BQU8sSUFBSSxPQUFPLENBQU0sVUFBQyxPQUFPLEVBQUUsTUFBTTtZQUN2QyxLQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsR0FB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