(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define('ngx-indexed-db', ['exports'], factory) :
    (factory((global['ngx-indexed-db'] = {})));
}(this, (function (exports) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var NgxIndexedDB = (function () {
        function NgxIndexedDB(dbName, version) {
            this.utils = new Utils();
            this.dbWrapper = new DbWrapper(dbName, version);
        }
        /**
         * @param {?} version
         * @param {?=} upgradeCallback
         * @return {?}
         */
        NgxIndexedDB.prototype.openDatabase = /**
         * @param {?} version
         * @param {?=} upgradeCallback
         * @return {?}
         */
            function (version, upgradeCallback) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    _this.dbWrapper.dbVersion = version;
                    /** @type {?} */
                    var request = _this.utils.indexedDB.open(_this.dbWrapper.dbName, version);
                    request.onsuccess = function (e) {
                        _this.dbWrapper.db = request.result;
                        resolve();
                    };
                    request.onerror = function (e) {
                        reject('IndexedDB error: ' + ((e.target)).errorCode
                            ? ((e.target)).errorCode + ' (' + ((e.target)).error + ')'
                            : ((e.target)).errorCode);
                    };
                    if (typeof upgradeCallback === 'function') {
                        request.onupgradeneeded = function (e) {
                            upgradeCallback(e, _this.dbWrapper.db);
                        };
                    }
                });
            };
        /**
         * @param {?} storeName
         * @param {?} key
         * @return {?}
         */
        NgxIndexedDB.prototype.getByKey = /**
         * @param {?} storeName
         * @param {?} key
         * @return {?}
         */
            function (storeName, key) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    _this.dbWrapper.validateBeforeTransaction(storeName, reject);
                    /** @type {?} */
                    var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readonly, storeName, reject, resolve));
                    /** @type {?} */
                    var objectStore = transaction.objectStore(storeName);
                    /** @type {?} */
                    var request;
                    request = objectStore.get(key);
                    request.onsuccess = function (event) {
                        resolve(((event.target)).result);
                    };
                });
            };
        /**
         * @param {?} storeName
         * @param {?=} keyRange
         * @param {?=} indexDetails
         * @return {?}
         */
        NgxIndexedDB.prototype.getAll = /**
         * @param {?} storeName
         * @param {?=} keyRange
         * @param {?=} indexDetails
         * @return {?}
         */
            function (storeName, keyRange, indexDetails) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    _this.dbWrapper.validateBeforeTransaction(storeName, reject);
                    /** @type {?} */
                    var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readonly, storeName, reject, resolve));
                    /** @type {?} */
                    var objectStore = transaction.objectStore(storeName);
                    /** @type {?} */
                    var result = [];
                    /** @type {?} */
                    var request;
                    if (indexDetails) {
                        /** @type {?} */
                        var index = objectStore.index(indexDetails.indexName);
                        /** @type {?} */
                        var order = indexDetails.order === 'desc' ? 'prev' : 'next';
                        request = index.openCursor(keyRange, /** @type {?} */ (order));
                    }
                    else {
                        request = objectStore.openCursor(keyRange);
                    }
                    request.onerror = function (e) {
                        reject(e);
                    };
                    request.onsuccess = function (evt) {
                        /** @type {?} */
                        var cursor = ((evt.target)).result;
                        if (cursor) {
                            result.push(cursor['value']);
                            cursor['continue']();
                        }
                        else {
                            resolve(result);
                        }
                    };
                });
            };
        /**
         * @param {?} storeName
         * @param {?} value
         * @param {?=} key
         * @return {?}
         */
        NgxIndexedDB.prototype.add = /**
         * @param {?} storeName
         * @param {?} value
         * @param {?=} key
         * @return {?}
         */
            function (storeName, value, key) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    _this.dbWrapper.validateBeforeTransaction(storeName, reject);
                    /** @type {?} */
                    var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readwrite, storeName, reject, resolve));
                    /** @type {?} */
                    var objectStore = transaction.objectStore(storeName);
                    /** @type {?} */
                    var request = objectStore.add(value, key);
                    request.onsuccess = function (evt) {
                        key = evt.target.result;
                    };
                });
            };
        /**
         * @param {?} storeName
         * @param {?} value
         * @param {?=} key
         * @return {?}
         */
        NgxIndexedDB.prototype.update = /**
         * @param {?} storeName
         * @param {?} value
         * @param {?=} key
         * @return {?}
         */
            function (storeName, value, key) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    _this.dbWrapper.validateBeforeTransaction(storeName, reject);
                    /** @type {?} */
                    var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readwrite, storeName, reject, resolve));
                    /** @type {?} */
                    var objectStore = transaction.objectStore(storeName);
                    objectStore.put(value, key);
                });
            };
        /**
         * @param {?} storeName
         * @param {?} key
         * @return {?}
         */
        NgxIndexedDB.prototype.delete = /**
         * @param {?} storeName
         * @param {?} key
         * @return {?}
         */
            function (storeName, key) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    _this.dbWrapper.validateBeforeTransaction(storeName, reject);
                    /** @type {?} */
                    var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readwrite, storeName, reject, resolve));
                    /** @type {?} */
                    var objectStore = transaction.objectStore(storeName);
                    objectStore['delete'](key);
                });
            };
        /**
         * @param {?} storeName
         * @param {?} cursorCallback
         * @param {?=} keyRange
         * @return {?}
         */
        NgxIndexedDB.prototype.openCursor = /**
         * @param {?} storeName
         * @param {?} cursorCallback
         * @param {?=} keyRange
         * @return {?}
         */
            function (storeName, cursorCallback, keyRange) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    _this.dbWrapper.validateBeforeTransaction(storeName, reject);
                    /** @type {?} */
                    var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readonly, storeName, reject, resolve));
                    /** @type {?} */
                    var objectStore = transaction.objectStore(storeName);
                    /** @type {?} */
                    var request = objectStore.openCursor(keyRange);
                    request.onsuccess = function (evt) {
                        cursorCallback(evt);
                        resolve();
                    };
                });
            };
        /**
         * @param {?} storeName
         * @return {?}
         */
        NgxIndexedDB.prototype.clear = /**
         * @param {?} storeName
         * @return {?}
         */
            function (storeName) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    _this.dbWrapper.validateBeforeTransaction(storeName, reject);
                    /** @type {?} */
                    var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readwrite, storeName, reject, resolve));
                    /** @type {?} */
                    var objectStore = transaction.objectStore(storeName);
                    objectStore.clear();
                    resolve();
                });
            };
        /**
         * @param {?} storeName
         * @param {?} indexName
         * @param {?} key
         * @return {?}
         */
        NgxIndexedDB.prototype.getByIndex = /**
         * @param {?} storeName
         * @param {?} indexName
         * @param {?} key
         * @return {?}
         */
            function (storeName, indexName, key) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    _this.dbWrapper.validateBeforeTransaction(storeName, reject);
                    /** @type {?} */
                    var transaction = _this.dbWrapper.createTransaction(_this.dbWrapper.optionsGenerator(DBMode.readonly, storeName, reject, resolve));
                    /** @type {?} */
                    var objectStore = transaction.objectStore(storeName);
                    /** @type {?} */
                    var index = objectStore.index(indexName);
                    /** @type {?} */
                    var request = index.get(key);
                    request.onsuccess = function (event) {
                        resolve(((event.target)).result);
                    };
                });
            };
        return NgxIndexedDB;
    }());
    var Utils = (function () {
        function Utils() {
            this.indexedDB =
                window.indexedDB ||
                    ((window)).mozIndexedDB ||
                    ((window)).webkitIndexedDB ||
                    ((window)).msIndexedDB;
        }
        return Utils;
    }());
    var DbWrapper = (function () {
        function DbWrapper(dbName, version) {
            this.dbName = dbName;
            this.dbVersion = version || 1;
        }
        /**
         * @param {?} storeName
         * @return {?}
         */
        DbWrapper.prototype.validateStoreName = /**
         * @param {?} storeName
         * @return {?}
         */
            function (storeName) {
                return this.db.objectStoreNames.contains(storeName);
            };
        /**
         * @param {?} storeName
         * @param {?} reject
         * @return {?}
         */
        DbWrapper.prototype.validateBeforeTransaction = /**
         * @param {?} storeName
         * @param {?} reject
         * @return {?}
         */
            function (storeName, reject) {
                if (!this.db) {
                    reject('You need to use the openDatabase function to create a database before you query it!');
                }
                if (!this.validateStoreName(storeName)) {
                    reject('objectStore does not exists: ' + storeName);
                }
            };
        /**
         * @param {?} options
         * @return {?}
         */
        DbWrapper.prototype.createTransaction = /**
         * @param {?} options
         * @return {?}
         */
            function (options) {
                /** @type {?} */
                var trans = this.db.transaction(options.storeName, options.dbMode);
                trans.onerror = options.error;
                trans.oncomplete = options.complete;
                trans.onabort = options.abort;
                return trans;
            };
        /**
         * @param {?} type
         * @param {?} storeName
         * @param {?} reject
         * @param {?} resolve
         * @return {?}
         */
        DbWrapper.prototype.optionsGenerator = /**
         * @param {?} type
         * @param {?} storeName
         * @param {?} reject
         * @param {?} resolve
         * @return {?}
         */
            function (type, storeName, reject, resolve) {
                return {
                    storeName: storeName,
                    dbMode: type,
                    error: function (e) {
                        reject(e);
                    },
                    complete: function (e) {
                        resolve();
                    },
                    abort: function (e) {
                        reject(e);
                    }
                };
            };
        return DbWrapper;
    }());
    /** @enum {string} */
    var DBMode = {
        readonly: 'readonly',
        readwrite: 'readwrite',
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    exports.NgxIndexedDB = NgxIndexedDB;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWluZGV4ZWQtZGIudW1kLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9uZ3gtaW5kZXhlZC1kYi9saWIvbmd4LWluZGV4ZWQtZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIE5neEluZGV4ZWREQiB7XG5cdHV0aWxzOiBVdGlscztcblx0ZGJXcmFwcGVyOiBEYldyYXBwZXI7XG5cblx0Y29uc3RydWN0b3IoZGJOYW1lOiBzdHJpbmcsIHZlcnNpb246IG51bWJlcikge1xuXHRcdHRoaXMudXRpbHMgPSBuZXcgVXRpbHMoKTtcblx0XHR0aGlzLmRiV3JhcHBlciA9IG5ldyBEYldyYXBwZXIoZGJOYW1lLCB2ZXJzaW9uKTtcblx0fVxuXG5cdG9wZW5EYXRhYmFzZSh2ZXJzaW9uOiBudW1iZXIsIHVwZ3JhZGVDYWxsYmFjaz86IEZ1bmN0aW9uKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlPGFueT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dGhpcy5kYldyYXBwZXIuZGJWZXJzaW9uID0gdmVyc2lvbjtcblx0XHRcdGxldCByZXF1ZXN0ID0gdGhpcy51dGlscy5pbmRleGVkREIub3Blbih0aGlzLmRiV3JhcHBlci5kYk5hbWUsIHZlcnNpb24pO1xuXHRcdFx0cmVxdWVzdC5vbnN1Y2Nlc3MgPSBlID0+IHtcblx0XHRcdFx0dGhpcy5kYldyYXBwZXIuZGIgPSByZXF1ZXN0LnJlc3VsdDtcblx0XHRcdFx0cmVzb2x2ZSgpO1xuXHRcdFx0fTtcblxuXHRcdFx0cmVxdWVzdC5vbmVycm9yID0gZSA9PiB7XG5cdFx0XHRcdHJlamVjdChcblx0XHRcdFx0XHQnSW5kZXhlZERCIGVycm9yOiAnICsgKDxhbnk+ZS50YXJnZXQpLmVycm9yQ29kZVxuXHRcdFx0XHRcdFx0PyAoPGFueT5lLnRhcmdldCkuZXJyb3JDb2RlICsgJyAoJyArICg8YW55PmUudGFyZ2V0KS5lcnJvciArICcpJ1xuXHRcdFx0XHRcdFx0OiAoPGFueT5lLnRhcmdldCkuZXJyb3JDb2RlXG5cdFx0XHRcdCk7XG5cdFx0XHR9O1xuXG5cdFx0XHRpZiAodHlwZW9mIHVwZ3JhZGVDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRyZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGUgPT4ge1xuXHRcdFx0XHRcdHVwZ3JhZGVDYWxsYmFjayhlLCB0aGlzLmRiV3JhcHBlci5kYik7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRnZXRCeUtleShzdG9yZU5hbWU6IHN0cmluZywga2V5OiBhbnkpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0aGlzLmRiV3JhcHBlci52YWxpZGF0ZUJlZm9yZVRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgcmVqZWN0KTtcblxuXHRcdFx0bGV0IHRyYW5zYWN0aW9uID0gdGhpcy5kYldyYXBwZXIuY3JlYXRlVHJhbnNhY3Rpb24oXG5cdFx0XHRcdFx0dGhpcy5kYldyYXBwZXIub3B0aW9uc0dlbmVyYXRvcihEQk1vZGUucmVhZG9ubHksIHN0b3JlTmFtZSwgcmVqZWN0LCByZXNvbHZlKVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHN0b3JlTmFtZSksXG5cdFx0XHRcdHJlcXVlc3Q6IElEQlJlcXVlc3Q7XG5cblx0XHRcdHJlcXVlc3QgPSBvYmplY3RTdG9yZS5nZXQoa2V5KTtcblx0XHRcdHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24oZXZlbnQ6IEV2ZW50KSB7XG5cdFx0XHRcdHJlc29sdmUoKDxhbnk+ZXZlbnQudGFyZ2V0KS5yZXN1bHQpO1xuXHRcdFx0fTtcblx0XHR9KTtcblx0fVxuXG5cdGdldEFsbChzdG9yZU5hbWU6IHN0cmluZywga2V5UmFuZ2U/OiBJREJLZXlSYW5nZSwgaW5kZXhEZXRhaWxzPzogSW5kZXhEZXRhaWxzKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlPGFueT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dGhpcy5kYldyYXBwZXIudmFsaWRhdGVCZWZvcmVUcmFuc2FjdGlvbihzdG9yZU5hbWUsIHJlamVjdCk7XG5cblx0XHRcdGxldCB0cmFuc2FjdGlvbiA9IHRoaXMuZGJXcmFwcGVyLmNyZWF0ZVRyYW5zYWN0aW9uKFxuXHRcdFx0XHRcdHRoaXMuZGJXcmFwcGVyLm9wdGlvbnNHZW5lcmF0b3IoREJNb2RlLnJlYWRvbmx5LCBzdG9yZU5hbWUsIHJlamVjdCwgcmVzb2x2ZSlcblx0XHRcdFx0KSxcblx0XHRcdFx0b2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzdG9yZU5hbWUpLFxuXHRcdFx0XHRyZXN1bHQ6IEFycmF5PGFueT4gPSBbXSxcblx0XHRcdFx0cmVxdWVzdDogSURCUmVxdWVzdDtcblx0XHRcdGlmIChpbmRleERldGFpbHMpIHtcblx0XHRcdFx0bGV0IGluZGV4ID0gb2JqZWN0U3RvcmUuaW5kZXgoaW5kZXhEZXRhaWxzLmluZGV4TmFtZSksXG5cdFx0XHRcdFx0b3JkZXIgPSBpbmRleERldGFpbHMub3JkZXIgPT09ICdkZXNjJyA/ICdwcmV2JyA6ICduZXh0Jztcblx0XHRcdFx0cmVxdWVzdCA9IGluZGV4Lm9wZW5DdXJzb3Ioa2V5UmFuZ2UsIDxJREJDdXJzb3JEaXJlY3Rpb24+b3JkZXIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVxdWVzdCA9IG9iamVjdFN0b3JlLm9wZW5DdXJzb3Ioa2V5UmFuZ2UpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdHJlamVjdChlKTtcblx0XHRcdH07XG5cblx0XHRcdHJlcXVlc3Qub25zdWNjZXNzID0gZnVuY3Rpb24oZXZ0OiBFdmVudCkge1xuXHRcdFx0XHRsZXQgY3Vyc29yID0gKDxJREJPcGVuREJSZXF1ZXN0PmV2dC50YXJnZXQpLnJlc3VsdDtcblx0XHRcdFx0aWYgKGN1cnNvcikge1xuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKGN1cnNvclsndmFsdWUnXSk7XG5cdFx0XHRcdFx0Y3Vyc29yWydjb250aW51ZSddKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmVzb2x2ZShyZXN1bHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH0pO1xuXHR9XG5cblx0YWRkKHN0b3JlTmFtZTogc3RyaW5nLCB2YWx1ZTogYW55LCBrZXk/OiBhbnkpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0aGlzLmRiV3JhcHBlci52YWxpZGF0ZUJlZm9yZVRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgcmVqZWN0KTtcblx0XHRcdGxldCB0cmFuc2FjdGlvbiA9IHRoaXMuZGJXcmFwcGVyLmNyZWF0ZVRyYW5zYWN0aW9uKFxuXHRcdFx0XHRcdHRoaXMuZGJXcmFwcGVyLm9wdGlvbnNHZW5lcmF0b3IoREJNb2RlLnJlYWR3cml0ZSwgc3RvcmVOYW1lLCByZWplY3QsIHJlc29sdmUpXG5cdFx0XHRcdCksXG5cdFx0XHRcdG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoc3RvcmVOYW1lKTtcblxuXHRcdFx0bGV0IHJlcXVlc3QgPSBvYmplY3RTdG9yZS5hZGQodmFsdWUsIGtleSk7XG5cdFx0XHRyZXF1ZXN0Lm9uc3VjY2VzcyA9IChldnQ6IGFueSkgPT4ge1xuXHRcdFx0XHRrZXkgPSBldnQudGFyZ2V0LnJlc3VsdDtcblx0XHRcdH07XG5cdFx0fSk7XG5cdH1cblxuXHR1cGRhdGUoc3RvcmVOYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnksIGtleT86IGFueSkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZTxhbnk+KChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdHRoaXMuZGJXcmFwcGVyLnZhbGlkYXRlQmVmb3JlVHJhbnNhY3Rpb24oc3RvcmVOYW1lLCByZWplY3QpO1xuXG5cdFx0XHRsZXQgdHJhbnNhY3Rpb24gPSB0aGlzLmRiV3JhcHBlci5jcmVhdGVUcmFuc2FjdGlvbihcblx0XHRcdFx0XHR0aGlzLmRiV3JhcHBlci5vcHRpb25zR2VuZXJhdG9yKERCTW9kZS5yZWFkd3JpdGUsIHN0b3JlTmFtZSwgcmVqZWN0LCByZXNvbHZlKVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHN0b3JlTmFtZSk7XG5cblx0XHRcdG9iamVjdFN0b3JlLnB1dCh2YWx1ZSwga2V5KTtcblx0XHR9KTtcblx0fVxuXG5cdGRlbGV0ZShzdG9yZU5hbWU6IHN0cmluZywga2V5OiBhbnkpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0aGlzLmRiV3JhcHBlci52YWxpZGF0ZUJlZm9yZVRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgcmVqZWN0KTtcblxuXHRcdFx0bGV0IHRyYW5zYWN0aW9uID0gdGhpcy5kYldyYXBwZXIuY3JlYXRlVHJhbnNhY3Rpb24oXG5cdFx0XHRcdFx0dGhpcy5kYldyYXBwZXIub3B0aW9uc0dlbmVyYXRvcihEQk1vZGUucmVhZHdyaXRlLCBzdG9yZU5hbWUsIHJlamVjdCwgcmVzb2x2ZSlcblx0XHRcdFx0KSxcblx0XHRcdFx0b2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzdG9yZU5hbWUpO1xuXG5cdFx0XHRvYmplY3RTdG9yZVsnZGVsZXRlJ10oa2V5KTtcblx0XHR9KTtcblx0fVxuXG5cdG9wZW5DdXJzb3Ioc3RvcmVOYW1lOiBzdHJpbmcsIGN1cnNvckNhbGxiYWNrOiAoZXZ0OiBFdmVudCkgPT4gdm9pZCwga2V5UmFuZ2U/OiBJREJLZXlSYW5nZSkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZTxhbnk+KChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdHRoaXMuZGJXcmFwcGVyLnZhbGlkYXRlQmVmb3JlVHJhbnNhY3Rpb24oc3RvcmVOYW1lLCByZWplY3QpO1xuXHRcdFx0bGV0IHRyYW5zYWN0aW9uID0gdGhpcy5kYldyYXBwZXIuY3JlYXRlVHJhbnNhY3Rpb24oXG5cdFx0XHRcdFx0dGhpcy5kYldyYXBwZXIub3B0aW9uc0dlbmVyYXRvcihEQk1vZGUucmVhZG9ubHksIHN0b3JlTmFtZSwgcmVqZWN0LCByZXNvbHZlKVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRvYmplY3RTdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHN0b3JlTmFtZSksXG5cdFx0XHRcdHJlcXVlc3QgPSBvYmplY3RTdG9yZS5vcGVuQ3Vyc29yKGtleVJhbmdlKTtcblxuXHRcdFx0cmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZ0OiBFdmVudCkgPT4ge1xuXHRcdFx0XHRjdXJzb3JDYWxsYmFjayhldnQpO1xuXHRcdFx0XHRyZXNvbHZlKCk7XG5cdFx0XHR9O1xuXHRcdH0pO1xuXHR9XG5cblx0Y2xlYXIoc3RvcmVOYW1lOiBzdHJpbmcpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0aGlzLmRiV3JhcHBlci52YWxpZGF0ZUJlZm9yZVRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgcmVqZWN0KTtcblx0XHRcdGxldCB0cmFuc2FjdGlvbiA9IHRoaXMuZGJXcmFwcGVyLmNyZWF0ZVRyYW5zYWN0aW9uKFxuXHRcdFx0XHRcdHRoaXMuZGJXcmFwcGVyLm9wdGlvbnNHZW5lcmF0b3IoREJNb2RlLnJlYWR3cml0ZSwgc3RvcmVOYW1lLCByZWplY3QsIHJlc29sdmUpXG5cdFx0XHRcdCksXG5cdFx0XHRcdG9iamVjdFN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoc3RvcmVOYW1lKTtcblx0XHRcdG9iamVjdFN0b3JlLmNsZWFyKCk7XG5cdFx0XHRyZXNvbHZlKCk7XG5cdFx0fSk7XG5cdH1cblxuXHRnZXRCeUluZGV4KHN0b3JlTmFtZTogc3RyaW5nLCBpbmRleE5hbWU6IHN0cmluZywga2V5OiBhbnkpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0aGlzLmRiV3JhcHBlci52YWxpZGF0ZUJlZm9yZVRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgcmVqZWN0KTtcblx0XHRcdGxldCB0cmFuc2FjdGlvbiA9IHRoaXMuZGJXcmFwcGVyLmNyZWF0ZVRyYW5zYWN0aW9uKFxuXHRcdFx0XHRcdHRoaXMuZGJXcmFwcGVyLm9wdGlvbnNHZW5lcmF0b3IoREJNb2RlLnJlYWRvbmx5LCBzdG9yZU5hbWUsIHJlamVjdCwgcmVzb2x2ZSlcblx0XHRcdFx0KSxcblx0XHRcdFx0b2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzdG9yZU5hbWUpLFxuXHRcdFx0XHRpbmRleCA9IG9iamVjdFN0b3JlLmluZGV4KGluZGV4TmFtZSksXG5cdFx0XHRcdHJlcXVlc3QgPSBpbmRleC5nZXQoa2V5KTtcblxuXHRcdFx0cmVxdWVzdC5vbnN1Y2Nlc3MgPSBldmVudCA9PiB7XG5cdFx0XHRcdHJlc29sdmUoKDxJREJPcGVuREJSZXF1ZXN0PmV2ZW50LnRhcmdldCkucmVzdWx0KTtcblx0XHRcdH07XG5cdFx0fSk7XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFV0aWxzIHtcblx0aW5kZXhlZERCOiBJREJGYWN0b3J5O1xuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMuaW5kZXhlZERCID1cblx0XHRcdHdpbmRvdy5pbmRleGVkREIgfHxcblx0XHRcdCg8YW55PndpbmRvdykubW96SW5kZXhlZERCIHx8XG5cdFx0XHQoPGFueT53aW5kb3cpLndlYmtpdEluZGV4ZWREQiB8fFxuXHRcdFx0KDxhbnk+d2luZG93KS5tc0luZGV4ZWREQjtcblx0fVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluZGV4RGV0YWlscyB7XG5cdGluZGV4TmFtZTogc3RyaW5nO1xuXHRvcmRlcjogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgRGJXcmFwcGVyIHtcblx0ZGJOYW1lOiBzdHJpbmc7XG5cdGRiVmVyc2lvbjogbnVtYmVyO1xuXHRkYjogSURCRGF0YWJhc2U7XG5cblx0Y29uc3RydWN0b3IoZGJOYW1lOiBzdHJpbmcsIHZlcnNpb246IG51bWJlcikge1xuXHRcdHRoaXMuZGJOYW1lID0gZGJOYW1lO1xuXHRcdHRoaXMuZGJWZXJzaW9uID0gdmVyc2lvbiB8fCAxO1xuXHR9XG5cblx0dmFsaWRhdGVTdG9yZU5hbWUoc3RvcmVOYW1lOiBzdHJpbmcpIHtcblx0XHRyZXR1cm4gdGhpcy5kYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKHN0b3JlTmFtZSk7XG5cdH1cblxuXHR2YWxpZGF0ZUJlZm9yZVRyYW5zYWN0aW9uKHN0b3JlTmFtZTogc3RyaW5nLCByZWplY3Q6IEZ1bmN0aW9uKSB7XG5cdFx0aWYgKCF0aGlzLmRiKSB7XG5cdFx0XHRyZWplY3QoJ1lvdSBuZWVkIHRvIHVzZSB0aGUgb3BlbkRhdGFiYXNlIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGRhdGFiYXNlIGJlZm9yZSB5b3UgcXVlcnkgaXQhJyk7XG5cdFx0fVxuXHRcdGlmICghdGhpcy52YWxpZGF0ZVN0b3JlTmFtZShzdG9yZU5hbWUpKSB7XG5cdFx0XHRyZWplY3QoJ29iamVjdFN0b3JlIGRvZXMgbm90IGV4aXN0czogJyArIHN0b3JlTmFtZSk7XG5cdFx0fVxuXHR9XG5cblx0Y3JlYXRlVHJhbnNhY3Rpb24ob3B0aW9uczogT3B0aW9ucyk6IElEQlRyYW5zYWN0aW9uIHtcblx0XHRsZXQgdHJhbnM6IElEQlRyYW5zYWN0aW9uID0gdGhpcy5kYi50cmFuc2FjdGlvbihvcHRpb25zLnN0b3JlTmFtZSwgb3B0aW9ucy5kYk1vZGUpO1xuXHRcdHRyYW5zLm9uZXJyb3IgPSBvcHRpb25zLmVycm9yO1xuXHRcdHRyYW5zLm9uY29tcGxldGUgPSBvcHRpb25zLmNvbXBsZXRlO1xuXHRcdHRyYW5zLm9uYWJvcnQgPSBvcHRpb25zLmFib3J0O1xuXHRcdHJldHVybiB0cmFucztcblx0fVxuXG5cdG9wdGlvbnNHZW5lcmF0b3IodHlwZTogYW55LCBzdG9yZU5hbWU6IGFueSwgcmVqZWN0OiBGdW5jdGlvbiwgcmVzb2x2ZTogRnVuY3Rpb24pOiBPcHRpb25zIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0c3RvcmVOYW1lOiBzdG9yZU5hbWUsXG5cdFx0XHRkYk1vZGU6IHR5cGUsXG5cdFx0XHRlcnJvcjogKGU6IEV2ZW50KSA9PiB7XG5cdFx0XHRcdHJlamVjdChlKTtcblx0XHRcdH0sXG5cdFx0XHRjb21wbGV0ZTogKGU6IEV2ZW50KSA9PiB7XG5cdFx0XHRcdHJlc29sdmUoKTtcblx0XHRcdH0sXG5cdFx0XHRhYm9ydDogKGU6IEV2ZW50KSA9PiB7XG5cdFx0XHRcdHJlamVjdChlKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW9ucyB7XG5cdHN0b3JlTmFtZTogc3RyaW5nO1xuXHRkYk1vZGU6IElEQlRyYW5zYWN0aW9uTW9kZTtcblx0ZXJyb3I6IChlOiBFdmVudCkgPT4gYW55O1xuXHRjb21wbGV0ZTogKGU6IEV2ZW50KSA9PiBhbnk7XG5cdGFib3J0PzogYW55O1xufVxuXG5leHBvcnQgZW51bSBEQk1vZGUge1xuXHRyZWFkb25seSA9ICdyZWFkb25seScsXG5cdHJlYWR3cml0ZSA9ICdyZWFkd3JpdGUnXG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLFFBQUE7UUFJQyxzQkFBWSxNQUFjLEVBQUUsT0FBZTtZQUMxQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksS0FBSyxFQUFFLENBQUM7WUFDekIsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLFNBQVMsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7U0FDaEQ7Ozs7OztRQUVELG1DQUFZOzs7OztZQUFaLFVBQWEsT0FBZSxFQUFFLGVBQTBCO2dCQUF4RCxpQkF1QkM7Z0JBdEJBLE9BQU8sSUFBSSxPQUFPLENBQU0sVUFBQyxPQUFPLEVBQUUsTUFBTTtvQkFDdkMsS0FBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDOztvQkFDbkMsSUFBSSxPQUFPLEdBQUcsS0FBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO29CQUN4RSxPQUFPLENBQUMsU0FBUyxHQUFHLFVBQUEsQ0FBQzt3QkFDcEIsS0FBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQzt3QkFDbkMsT0FBTyxFQUFFLENBQUM7cUJBQ1YsQ0FBQztvQkFFRixPQUFPLENBQUMsT0FBTyxHQUFHLFVBQUEsQ0FBQzt3QkFDbEIsTUFBTSxDQUNMLG1CQUFtQixHQUFHLEVBQU0sQ0FBQyxDQUFDLE1BQU0sR0FBRSxTQUFTOzhCQUM1QyxFQUFNLENBQUMsQ0FBQyxNQUFNLEdBQUUsU0FBUyxHQUFHLElBQUksR0FBRyxFQUFNLENBQUMsQ0FBQyxNQUFNLEdBQUUsS0FBSyxHQUFHLEdBQUc7OEJBQzlELEVBQU0sQ0FBQyxDQUFDLE1BQU0sR0FBRSxTQUFTLENBQzVCLENBQUM7cUJBQ0YsQ0FBQztvQkFFRixJQUFJLE9BQU8sZUFBZSxLQUFLLFVBQVUsRUFBRTt3QkFDMUMsT0FBTyxDQUFDLGVBQWUsR0FBRyxVQUFBLENBQUM7NEJBQzFCLGVBQWUsQ0FBQyxDQUFDLEVBQUUsS0FBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQzt5QkFDdEMsQ0FBQztxQkFDRjtpQkFDRCxDQUFDLENBQUM7YUFDSDs7Ozs7O1FBRUQsK0JBQVE7Ozs7O1lBQVIsVUFBUyxTQUFpQixFQUFFLEdBQVE7Z0JBQXBDLGlCQWVDO2dCQWRBLE9BQU8sSUFBSSxPQUFPLENBQU0sVUFBQyxPQUFPLEVBQUUsTUFBTTtvQkFDdkMsS0FBSSxDQUFDLFNBQVMsQ0FBQyx5QkFBeUIsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDLENBQUM7O29CQUU1RCxJQUFJLFdBQVcsR0FBRyxLQUFJLENBQUMsU0FBUyxDQUFDLGlCQUFpQixDQUNoRCxLQUFJLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FDNUUsQ0FFbUI7O29CQUpyQixJQUdDLFdBQVcsR0FBRyxXQUFXLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUM1Qjs7b0JBSnJCLElBSUMsT0FBTyxDQUFhO29CQUVyQixPQUFPLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDL0IsT0FBTyxDQUFDLFNBQVMsR0FBRyxVQUFTLEtBQVk7d0JBQ3hDLE9BQU8sQ0FBQyxFQUFNLEtBQUssQ0FBQyxNQUFNLEdBQUUsTUFBTSxDQUFDLENBQUM7cUJBQ3BDLENBQUM7aUJBQ0YsQ0FBQyxDQUFDO2FBQ0g7Ozs7Ozs7UUFFRCw2QkFBTTs7Ozs7O1lBQU4sVUFBTyxTQUFpQixFQUFFLFFBQXNCLEVBQUUsWUFBMkI7Z0JBQTdFLGlCQWdDQztnQkEvQkEsT0FBTyxJQUFJLE9BQU8sQ0FBTSxVQUFDLE9BQU8sRUFBRSxNQUFNO29CQUN2QyxLQUFJLENBQUMsU0FBUyxDQUFDLHlCQUF5QixDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQzs7b0JBRTVELElBQUksV0FBVyxHQUFHLEtBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQ2hELEtBQUksQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUM1RSxDQUdtQjs7b0JBTHJCLElBR0MsV0FBVyxHQUFHLFdBQVcsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBRTVCOztvQkFMckIsSUFJQyxNQUFNLEdBQWUsRUFBRSxDQUNIOztvQkFMckIsSUFLQyxPQUFPLENBQWE7b0JBQ3JCLElBQUksWUFBWSxFQUFFOzt3QkFDakIsSUFBSSxLQUFLLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQ0k7O3dCQUR6RCxJQUNDLEtBQUssR0FBRyxZQUFZLENBQUMsS0FBSyxLQUFLLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxDQUFDO3dCQUN6RCxPQUFPLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQyxRQUFRLG9CQUFzQixLQUFLLEVBQUMsQ0FBQztxQkFDaEU7eUJBQU07d0JBQ04sT0FBTyxHQUFHLFdBQVcsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7cUJBQzNDO29CQUVELE9BQU8sQ0FBQyxPQUFPLEdBQUcsVUFBUyxDQUFDO3dCQUMzQixNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7cUJBQ1YsQ0FBQztvQkFFRixPQUFPLENBQUMsU0FBUyxHQUFHLFVBQVMsR0FBVTs7d0JBQ3RDLElBQUksTUFBTSxHQUFHLEVBQW1CLEdBQUcsQ0FBQyxNQUFNLEdBQUUsTUFBTSxDQUFDO3dCQUNuRCxJQUFJLE1BQU0sRUFBRTs0QkFDWCxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDOzRCQUM3QixNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQzt5QkFDckI7NkJBQU07NEJBQ04sT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO3lCQUNoQjtxQkFDRCxDQUFDO2lCQUNGLENBQUMsQ0FBQzthQUNIOzs7Ozs7O1FBRUQsMEJBQUc7Ozs7OztZQUFILFVBQUksU0FBaUIsRUFBRSxLQUFVLEVBQUUsR0FBUztnQkFBNUMsaUJBYUM7Z0JBWkEsT0FBTyxJQUFJLE9BQU8sQ0FBTSxVQUFDLE9BQU8sRUFBRSxNQUFNO29CQUN2QyxLQUFJLENBQUMsU0FBUyxDQUFDLHlCQUF5QixDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQzs7b0JBQzVELElBQUksV0FBVyxHQUFHLEtBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQ2hELEtBQUksQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUM3RSxDQUNnRDs7b0JBSGxELElBR0MsV0FBVyxHQUFHLFdBQVcsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUM7O29CQUVsRCxJQUFJLE9BQU8sR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztvQkFDMUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxVQUFDLEdBQVE7d0JBQzVCLEdBQUcsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztxQkFDeEIsQ0FBQztpQkFDRixDQUFDLENBQUM7YUFDSDs7Ozs7OztRQUVELDZCQUFNOzs7Ozs7WUFBTixVQUFPLFNBQWlCLEVBQUUsS0FBVSxFQUFFLEdBQVM7Z0JBQS9DLGlCQVdDO2dCQVZBLE9BQU8sSUFBSSxPQUFPLENBQU0sVUFBQyxPQUFPLEVBQUUsTUFBTTtvQkFDdkMsS0FBSSxDQUFDLFNBQVMsQ0FBQyx5QkFBeUIsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDLENBQUM7O29CQUU1RCxJQUFJLFdBQVcsR0FBRyxLQUFJLENBQUMsU0FBUyxDQUFDLGlCQUFpQixDQUNoRCxLQUFJLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FDN0UsQ0FDZ0Q7O29CQUhsRCxJQUdDLFdBQVcsR0FBRyxXQUFXLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFDO29CQUVsRCxXQUFXLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztpQkFDNUIsQ0FBQyxDQUFDO2FBQ0g7Ozs7OztRQUVELDZCQUFNOzs7OztZQUFOLFVBQU8sU0FBaUIsRUFBRSxHQUFRO2dCQUFsQyxpQkFXQztnQkFWQSxPQUFPLElBQUksT0FBTyxDQUFNLFVBQUMsT0FBTyxFQUFFLE1BQU07b0JBQ3ZDLEtBQUksQ0FBQyxTQUFTLENBQUMseUJBQXlCLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDOztvQkFFNUQsSUFBSSxXQUFXLEdBQUcsS0FBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsQ0FDaEQsS0FBSSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQzdFLENBQ2dEOztvQkFIbEQsSUFHQyxXQUFXLEdBQUcsV0FBVyxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQztvQkFFbEQsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2lCQUMzQixDQUFDLENBQUM7YUFDSDs7Ozs7OztRQUVELGlDQUFVOzs7Ozs7WUFBVixVQUFXLFNBQWlCLEVBQUUsY0FBb0MsRUFBRSxRQUFzQjtnQkFBMUYsaUJBY0M7Z0JBYkEsT0FBTyxJQUFJLE9BQU8sQ0FBTSxVQUFDLE9BQU8sRUFBRSxNQUFNO29CQUN2QyxLQUFJLENBQUMsU0FBUyxDQUFDLHlCQUF5QixDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQzs7b0JBQzVELElBQUksV0FBVyxHQUFHLEtBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQ2hELEtBQUksQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUM1RSxDQUUwQzs7b0JBSjVDLElBR0MsV0FBVyxHQUFHLFdBQVcsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQ0w7O29CQUo1QyxJQUlDLE9BQU8sR0FBRyxXQUFXLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUU1QyxPQUFPLENBQUMsU0FBUyxHQUFHLFVBQUMsR0FBVTt3QkFDOUIsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDO3dCQUNwQixPQUFPLEVBQUUsQ0FBQztxQkFDVixDQUFDO2lCQUNGLENBQUMsQ0FBQzthQUNIOzs7OztRQUVELDRCQUFLOzs7O1lBQUwsVUFBTSxTQUFpQjtnQkFBdkIsaUJBVUM7Z0JBVEEsT0FBTyxJQUFJLE9BQU8sQ0FBTSxVQUFDLE9BQU8sRUFBRSxNQUFNO29CQUN2QyxLQUFJLENBQUMsU0FBUyxDQUFDLHlCQUF5QixDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQzs7b0JBQzVELElBQUksV0FBVyxHQUFHLEtBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQ2hELEtBQUksQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUM3RSxDQUNnRDs7b0JBSGxELElBR0MsV0FBVyxHQUFHLFdBQVcsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUM7b0JBQ2xELFdBQVcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztvQkFDcEIsT0FBTyxFQUFFLENBQUM7aUJBQ1YsQ0FBQyxDQUFDO2FBQ0g7Ozs7Ozs7UUFFRCxpQ0FBVTs7Ozs7O1lBQVYsVUFBVyxTQUFpQixFQUFFLFNBQWlCLEVBQUUsR0FBUTtnQkFBekQsaUJBY0M7Z0JBYkEsT0FBTyxJQUFJLE9BQU8sQ0FBTSxVQUFDLE9BQU8sRUFBRSxNQUFNO29CQUN2QyxLQUFJLENBQUMsU0FBUyxDQUFDLHlCQUF5QixDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQzs7b0JBQzVELElBQUksV0FBVyxHQUFHLEtBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQ2hELEtBQUksQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUM1RSxDQUd3Qjs7b0JBTDFCLElBR0MsV0FBVyxHQUFHLFdBQVcsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBRXZCOztvQkFMMUIsSUFJQyxLQUFLLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FDWDs7b0JBTDFCLElBS0MsT0FBTyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBRTFCLE9BQU8sQ0FBQyxTQUFTLEdBQUcsVUFBQSxLQUFLO3dCQUN4QixPQUFPLENBQUMsRUFBbUIsS0FBSyxDQUFDLE1BQU0sR0FBRSxNQUFNLENBQUMsQ0FBQztxQkFDakQsQ0FBQztpQkFDRixDQUFDLENBQUM7YUFDSDsyQkF4S0Y7UUF5S0MsQ0FBQTtBQXpLRCxJQTJLQSxJQUFBO1FBR0M7WUFDQyxJQUFJLENBQUMsU0FBUztnQkFDYixNQUFNLENBQUMsU0FBUztvQkFDaEIsRUFBTSxNQUFNLEdBQUUsWUFBWTtvQkFDMUIsRUFBTSxNQUFNLEdBQUUsZUFBZTtvQkFDN0IsRUFBTSxNQUFNLEdBQUUsV0FBVyxDQUFDO1NBQzNCO29CQXBMRjtRQXFMQyxDQUFBO0FBVkQsSUFpQkEsSUFBQTtRQUtDLG1CQUFZLE1BQWMsRUFBRSxPQUFlO1lBQzFDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1lBQ3JCLElBQUksQ0FBQyxTQUFTLEdBQUcsT0FBTyxJQUFJLENBQUMsQ0FBQztTQUM5Qjs7Ozs7UUFFRCxxQ0FBaUI7Ozs7WUFBakIsVUFBa0IsU0FBaUI7Z0JBQ2xDLE9BQU8sSUFBSSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUM7YUFDcEQ7Ozs7OztRQUVELDZDQUF5Qjs7Ozs7WUFBekIsVUFBMEIsU0FBaUIsRUFBRSxNQUFnQjtnQkFDNUQsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUU7b0JBQ2IsTUFBTSxDQUFDLHFGQUFxRixDQUFDLENBQUM7aUJBQzlGO2dCQUNELElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLEVBQUU7b0JBQ3ZDLE1BQU0sQ0FBQywrQkFBK0IsR0FBRyxTQUFTLENBQUMsQ0FBQztpQkFDcEQ7YUFDRDs7Ozs7UUFFRCxxQ0FBaUI7Ozs7WUFBakIsVUFBa0IsT0FBZ0I7O2dCQUNqQyxJQUFJLEtBQUssR0FBbUIsSUFBSSxDQUFDLEVBQUUsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ25GLEtBQUssQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQztnQkFDOUIsS0FBSyxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDO2dCQUNwQyxLQUFLLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUM7Z0JBQzlCLE9BQU8sS0FBSyxDQUFDO2FBQ2I7Ozs7Ozs7O1FBRUQsb0NBQWdCOzs7Ozs7O1lBQWhCLFVBQWlCLElBQVMsRUFBRSxTQUFjLEVBQUUsTUFBZ0IsRUFBRSxPQUFpQjtnQkFDOUUsT0FBTztvQkFDTixTQUFTLEVBQUUsU0FBUztvQkFDcEIsTUFBTSxFQUFFLElBQUk7b0JBQ1osS0FBSyxFQUFFLFVBQUMsQ0FBUTt3QkFDZixNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7cUJBQ1Y7b0JBQ0QsUUFBUSxFQUFFLFVBQUMsQ0FBUTt3QkFDbEIsT0FBTyxFQUFFLENBQUM7cUJBQ1Y7b0JBQ0QsS0FBSyxFQUFFLFVBQUMsQ0FBUTt3QkFDZixNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7cUJBQ1Y7aUJBQ0QsQ0FBQzthQUNGO3dCQXpPRjtRQTBPQyxDQUFBO0FBOUNEOztRQXlEQyxVQUFXLFVBQVU7UUFDckIsV0FBWSxXQUFXOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsifQ==